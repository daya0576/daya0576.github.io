if(void 0===window.DP)var DP={};DP.mix||(DP.mix=function(e,f,a,b){if(!f||!e)return e;void 0===a&&(a=!0);var c=0,d,g;if(b&&(g=b.length))for(;c<g;c++){if(d=b[c],d in f&&(a||!(d in e)))e[d]=f[d]}else for(d in f)if(a||!(d in e))e[d]=f[d];return e});DP.delay||(DP.delay=function(e,f,a){var b;return{start:function(){b=a?setInterval(e,f):setTimeout(e,f);return this},cancel:function(){a?clearInterval(b):clearTimeout(b);return this}}});
(function(e){var f;f=new Class({Implements:[Options,Events],options:{stage:1,move:1,triggerType:"click",selectorPre:"",trigger:".trigger",triggerOnClass:"J_trigger-on",countClass:".page-count",container:".switch-track",prev:".prev",next:".next",items:"li",itemOnClass:"J_cont-on",activeIndex:0},_plugins:[],_plugin_names:[],plugin:function(){if(!this.pluginFinal)for(var a=0,b=arguments.length,c,d=this,g=f.Plugins,h=function(a){if(a&&a.name&&!d._plugin_names.contains(a.name)){if(a.require&&arguments.callee(e.Switch.Plugins[a.require]))return d.pluginFinal=
true;a.options&&d.setOptions(a.options);d._plugins.push(a);d._plugin_names.push(a.name);if(a.final_)return d.pluginFinal=true}};a<b;++a)if(c=arguments[a]){$type(c)==="string"&&(c=g[c]);if(h(c))break}return this},init:function(a){var b=this,c;c=b._plugins;b.setOptions(a);a=b.options;if(a.selectorPre)a.selectorPre=String(a.selectorPre).trim()+" ";c.each(function(a){a.init&&a.init(b)});b._initEvent();b.container=$$(a.selectorPre+a.container)[0];if(b.container){c=b.activeIndex=a.activeIndex||0;b.fireEvent("beforeInit");
b._initDom();b._bindNav();b.fireEvent("afterInit");(currentItem=b.items[c])&&!currentItem.hasClass(b.options.itemOnClass)&&b.switchTo(c,true)}b.init=b.plugin=function(){return b};return b},_initDom:function(){var a=this.options,b=a.selectorPre;this.items=this.container.getElements(a.items);this.triggers=a.trigger?$$(b+a.trigger):[];this.pageCounters=$$(b+a.countClass);a.prev&&(this.prevBtn=$$(b+a.prev)[0]);a.next&&(this.nextBtn=$$(b+a.next)[0]);this.length=this.items.length;this.pages=1+Math.ceil((this.length-
a.stage)/(a.move||1));if(this.pages<2)this.leftEnd=this.rightEnd=true},_bindNav:function(){var a=this,b=this.options.triggerType,c=0,d=this.triggers.length,e;a.prevBtn&&a.prevBtn.addEvent(b,a.prev.bind(a));for(a.nextBtn&&a.nextBtn.addEvent(b,a.next.bind(a));c<d;++c)(function(c){e=a.triggers[c];e.addEvent(b,function(b){b&&b.preventDefault();a.switchTo(c)}).addEvents({mouseenter:function(){a._onEnterTrigger(c)},mouseleave:function(){a._onLeaveTrigger(c)}})})(c)},_initEvent:function(){this.addEvents(this.options.events)},
_onEnterTrigger:function(){this.triggerOn=true},_onLeaveTrigger:function(){this.triggerOn=false},switchTo:function(a,b){if(b||this.activeIndex!==a){this.fireEvent("beforeSwitch",[this.activeIndex,a]);this.activeIndex=a;this.fireEvent("switching");this.pageCounters.set("text",a+1)}return this},prev:function(a){a&&a.preventDefault();!this.leftEnd&&this.switchTo((this.activeIndex-1).limit(0,this.pages-1))},next:function(a){a&&a.preventDefault();!this.rightEnd&&this.switchTo((this.activeIndex+1).limit(0,
this.pages-1))},_dealBtn:function(){var a={opacity:0.3,cursor:"default"},b={opacity:1,cursor:""};if(this.prevBtn)(this.leftEnd=!this.activeIndex)?this.prevBtn.setStyles(a):this.prevBtn.setStyles(b);if(this.nextBtn)(this.rightEnd=this.activeIndex>=this.pages-1)?this.nextBtn.setStyles(a):this.nextBtn.setStyles(b)}});f.Plugins={lazyLoad:{name:"lazyLoad",options:{lazyLoadCS:".J_lazy-load"},init:function(a){a.addEvent("beforeInit",function(){var b=a.options,c;if(b=$$(b.selectorPre+b.lazyLoadCS)[0]){c=
b.tagName.toLowerCase()=="textarea"?b.value.trim():b.innerHTML.trim();c=new Element("div",{html:c});c.getChildren().addClass("D-switch-lazy-item").inject(a.container);b.dispose()}})}},tabSwitch:{name:"tabSwitch",final_:true,init:function(a){a.addEvent("beforeSwitch",function(){o=a.options;activeIndex=a.activeIndex;a.triggers[activeIndex]&&a.triggers[activeIndex].removeClass(o.triggerOnClass);a.items[activeIndex]&&a.items[activeIndex].removeClass(o.itemOnClass)});a.addEvent("switching",function(){o=
a.options;activeIndex=a.activeIndex;a.triggers[activeIndex]&&a.triggers[activeIndex].addClass(o.triggerOnClass);a.items[activeIndex]&&a.items[activeIndex].addClass(o.itemOnClass)})}},carousel:{name:"carousel",options:{fx:{link:"cancel",transition:Fx.Transitions.Cubic.easeOut,duration:300},direction:"left"},init:function(a){function b(b,c){var d=a,e=d.triggers[c||d.activeIndex];e&&(b?e.removeClass(d.options.triggerOnClass):e.addClass(d.options.triggerOnClass))}var c=a.options,d=c.fx,e="offset"+c.direction.capitalize();
if(!d.property)d.property=c.direction;d.onComplete=function(){a.fireEvent("fxcomplete")};a.addEvent("beforeInit",function(){a.effect=new Fx.Tween(a.container,d);delete a.options.fx});a.addEvent("afterInit",function(){var b=a,d=b.triggers.length,f;for(f=b.pages;f<d;++f)b.triggers[f].dispose();b.items[0].offsetParent!==b.container&&b.container.setStyle("position","relative");b=a;b.container.setStyle(c.direction,-b.items[b.activeIndex*b.options.move][e]);b._dealBtn()});a.addEvent("beforeSwitch",function(){b(true)});
a.addEvent("switching",function(){var c=a,d=c.activeIndex;c._dealBtn();c.effect.start(-c.items[d*c.options.move][e]);b(false,d)})}},fade:{name:"fade",options:{fx:{link:"cancel",duration:300}},init:function(){}},autoPlay:{name:"autoPlay",options:{autoPlay:true,interval:5E3,hoverStop:true},init:function(a){var b=e.delay(function(){!a.triggerOn&&!a.paused&&a.switchTo((a.activeIndex+1)%a.length)},a.options.interval);a.addEvent("afterInit",function(){a.container.addEvents({mouseenter:function(){a.paused=
true},mouseleave:function(){a.paused=false;b.start()}});b.start()});a.addEvent("beforeSwitch",function(){b.cancel()});a.addEvent("fxcomplete",function(){b.start()})}}};e.Switch=f})(DP);
