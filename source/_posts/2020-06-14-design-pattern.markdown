---
title: ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹å­¦ä¹ ç¬”è®°
tags:
  - è¯»åæ„Ÿ
  - java
date: 2020-06-14 01:05:14
---


> OO åŸåˆ™æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ï¼Œè€Œè®¾è®¡æ¨¡å¼æ˜¯æˆ‘ä»¬çš„åšæ³•ã€‚

åˆšä» python è½¬ java åŠå¹´å¤šï¼Œè™½ç„¶è¿™é—¨è¯­è¨€çœ‹ä¸Šå»æœ‰ä¸€ä¸ç¬¨é‡å’Œå•°å—¦ï¼Œä½†å’Œè®¾è®¡æ¨¡å¼é‡ä¸Šï¼Œå°±å¥½åƒå’–å•¡ä¸ç‰›å¥¶çš„èåˆï¼Œå˜æˆä¸€æ¯é¦™é†‡çš„æ‹¿é“ğŸ¤”ã€‚æœ¬æ–‡åšä¸ºä¸ªäººçš„è¯»ä¹¦ç¬”è®°ï¼ˆ~~æ°´ä¸€ç¯‡åšå®¢~~ï¼‰ï¼ŒåŒæ—¶å¦‚æœèƒ½å¸®åˆ°ä½ å°±æ›´å¥½å•¦ï¼

<!--more-->

# åˆ†ç±»
å¤§å®¶åº”è¯¥è¿˜çŸ¥é“ä¸€æœ¬ä¹¦ï¼Œå«åš [ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹](https://book.douban.com/subject/1052241/)ï¼Œå…¶ä¸­éå¸¸ç²¾è¾Ÿçš„å°†è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰ç±»ï¼ˆæŒç»­å­¦ä¹ æ›´æ–°ä¸­ï¼‰ï¼š

1. åˆ›å»ºå‹æ¨¡å¼ï¼š
    - ç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factoryï¼‰ -> **ç¬¬å››ç« ï¼šå·¥å‚æ¨¡å¼**
    - å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰
    - æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰
    - åˆ›å»ºè€…æ¨¡å¼ï¼ˆBuilderï¼‰
    - åŸå‹æ¨¡å¼ï¼ˆPrototypeï¼‰
    - å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ -> **ç¬¬äº”ç« ï¼šå•ä¾‹**
2. ç»“æ„å‹æ¨¡å¼
    - å¤–è§‚æ¨¡å¼/é—¨é¢æ¨¡å¼ï¼ˆFacadeé—¨é¢æ¨¡å¼ï¼‰
    - é€‚é…å™¨æ¨¡å¼ï¼ˆAdapterï¼‰ -> **ç¬¬ä¸ƒç« ï¼šé€‚é…å™¨æ¨¡å¼**
    - ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰ -> **ç¬¬åä¸€ç« ï¼šä»£ç†æ¨¡å¼**
    - è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰ -> **ç¬¬ä¸‰ç« ï¼šè£…é¥°è€…æ¨¡å¼**
    - æ¡¥æ¢æ¨¡å¼/æ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰
    - ç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰
    - äº«å…ƒæ¨¡å¼ï¼ˆFlyweightï¼‰
3. è¡Œä¸ºæ¨¡å¼
    - æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰ -> **ç¬¬å…«ç« ï¼šæ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼**
    - è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ -> **ç¬¬äºŒç« ï¼šè§‚å¯Ÿè€…æ¨¡å¼**
    - çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰ -> **ç¬¬åç« ï¼šçŠ¶æ€æ¨¡å¼**
    - ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰
    - èŒè´£é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰
    - å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰ -> **ç¬¬å…­ç« ï¼šå‘½ä»¤æ¨¡å¼**
    - è®¿é—®è€…æ¨¡å¼ï¼ˆVisitorï¼‰
    - è°ƒåœè€…æ¨¡å¼ï¼ˆMediatorï¼‰
    - å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰
    - è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratorï¼‰ -> **ç¬¬ä¹ç« ï¼šè¿­ä»£ä¸ç»„åˆæ¨¡å¼**
    - è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰

# ç« èŠ‚ 
## ç¬¬ä¸€ç« ï¼šç­–ç•¥æ¨¡å¼ - æ•´åˆé¸­å­çš„è¡Œä¸º
å°†æ˜“å˜çš„å±æ€§ï¼Œåšä¸ºä¸€ä¸ªå¯¹è±¡å˜é‡å»åˆå§‹åŒ–è¿›è¡Œ**ç»„åˆï¼ˆè¡Œä¸ºä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼ï¼‰**

![1. Duck Behaviors](/images/blog/200104_japan_travel/1.%20Duck%20Behaviors.png)


## ç¬¬äºŒç« ï¼šè§‚å¯Ÿè€…æ¨¡å¼ - The Observer Pattern
ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼šä¸åŒçš„ Display åœ¨å®ä¾‹åŒ–æ—¶ï¼Œä¼šåœ¨ WeatherData ä¸­è¢«æ³¨å†Œä¸ºã€Œè§‚å¯Ÿè€…ã€ç»Ÿä¸€ç®¡ç†ï¼Œå½“ã€Œè¢«è§‚å¯Ÿè€…ã€ï¼ˆæ°”è±¡æ•°æ®ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ç»Ÿä¸€è§¦å‘é€šçŸ¥ã€‚   

**ç›®çš„ï¼š**è®©è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ï¼Œå°½å¯èƒ½çš„è§£è€¦ã€‚  

![2. Observer Pattern](/images/blog/200104_japan_travel/2.%20Observer%20Pattern.png)

æ•ˆæœï¼š

```java
WeatherData weatherData = new WeatherData();

CurrentConditionsDisplay currentConditions = new CurrentConditionsDisplay(weatherData);
StatisticsDisplay statisticsDisplay = new StatisticsDisplay(weatherData);
ForecastDisplay forecastDisplay = new ForecastDisplay(weatherData);

weatherData.setMeasurements(80, 65, 30.4f);
// æ›´æ–° weatherData åï¼Œä¼šä¸»åŠ¨é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€… 
// Forecast: Improving weather on the way!
// Avg/Max/Min temperature = 80.0/80.0/80.0
// Current conditions: 80.0F degrees and 65.0% humidity
```

## ç¬¬ä¸‰ç« ï¼šè£…é¥°è€…æ¨¡å¼ - The Decorator Pattern
å½“é‡åˆ°ç»§æ‰¿æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨æ›´ä¸ºä¼˜é›…çš„è£…é¥°è€…æ¨¡å¼ï¼š

![3. The Decorator Pattern: Decorating Objects](/images/blog/200104_japan_travel/3.%20The%20Decorator%20Pattern:%20Decorating%20Objects.png)

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼Œä½†åˆå§‹åŒ–çš„æ–¹å¼æœ‰ç‚¹ç®€é™‹ã€‚æ–‡ä¸­ä¹Ÿæåˆ°åç»­ â€œå·¥å‚â€ & â€œç”Ÿæˆå™¨â€ æ¨¡å¼ï¼Œå°†æœ‰æ›´å¥½çš„æ–¹å¼å»ºç«‹è¢«è£…é¥°å¯¹è±¡ã€‚
``` java
// æ¥ä¸€æ¯ Espresso
Beverage beverage = new Espresso();
System.out.println(beverage);
// Espresso$1.99

// æ¥ä¸€æ¯è°ƒæ–™ä¸ºè±†æµ†ï¼Œæ‘©å¡ï¼Œå¥¶æ³¡çš„ HouseBlend å’–å•¡
Beverage beverage1 = new HouseBlend();
beverage1 = new Soy(new Mocha(new Whip(beverage1)));
System.out.println(beverage1);
// HouseBlend, Whip, Mocha, Soy$1.39
```


## ç¬¬å››ç« ï¼šå·¥å‚æ¨¡å¼ - The Factory Pattern

å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œå°±ä¸å¤šåšè§£é‡Šäº†ã€‚

> ç®€å•å·¥å‚å…¶å®ä¸æ˜¯ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œåè€Œæ›´åƒæ˜¯ä¸€ç§ç¼–ç¨‹ä¹ æƒ¯ã€‚

![4. The Factory Pattern](/images/blog/200104_japan_travel/4.%20The%20Factory%20Pattern.png)

æ•ˆæœï¼š
``` java
SimplePizzaFactory factory = new SimplePizzaFactory();
PizzaStore store = new PizzaStore(factory);

Pizza pizza = store.orderPizza("cheese");
System.out.println("We ordered a " + pizza.getName() + "\n");
System.out.println(pizza);
```

ç« èŠ‚ä¸­è¿˜æåˆ°äº†æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸¤å±‚çš„ factoryï¼Œæ„Ÿè§‰æœ‰ç‚¹å¤ªèŠ±äº†ã€‚ã€‚æ„Ÿå…´è¶£å¯ä»¥é˜…è¯»åŸæ–‡ã€‚

## ç¬¬äº”ç« ï¼šå•ä¾‹ - Singleton
å†ç†Ÿæ‚‰ä¸è¿‡çš„è€æœ‹å‹ï¼Œå°±ä¸å¤šè¯´äº†ã€‚ç®€å•å›ç­”ä¸¤ä¸ªé—®é¢˜ï¼š

Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å…¨å±€å˜é‡å‘¢ï¼Ÿ
A: å› ä¸ºéœ€è¦åœ¨ä¸€å¼€å§‹å°±åˆ›å»ºå¥½å¯¹è±¡ï¼Œä½†å®é™…ä¸€ç›´æ²¡æœ‰ç”¨åˆ°ï¼Œé€ æˆèµ„æºçš„æµªè´¹ã€‚æœ‰ç§ç±»ä¼¼ lazyload çš„æ„æ€ã€‚

Q. ä»€ä¹ˆéœ€è¦å•ä¾‹å‘¢ï¼Ÿ
A: ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚

![5. Singleton](/images/blog/200104_japan_travel/5.%20Singleton.png)

æ•ˆæœï¼š
```java
// æ³¨æ„æœ‰ä¸ªå°ç»†èŠ‚ï¼šSingleton çš„æ„é€ å™¨æ˜¯ç§æœ‰çš„ï¼Œæ„å‘³ç€æ— æ³•è¢«ç›´æ¥ new å‡ºæ¥ï¼ˆå®ä¾‹åªèƒ½é€šè¿‡å·¥å‚æ¨¡å¼åˆ›é€ å‡ºæ¥ï¼‰
Singleton instance = Singleton.getInstance();
```

## ç¬¬å…­ç« ï¼šå‘½ä»¤æ¨¡å¼ - The Command Pattern:
RemoteLoader å¯èƒ½æœ‰ç‚¹å›°æƒ‘ï¼Œå…¶ä»–å¯ä»¥ç®€å•å°†å®ƒç†è§£ä¸º `main` å‡½æ•°ï¼Œå°† Light å’Œ LightOnCommand ç»‘å®šï¼Œå¹¶å°† command ä¸ remoteControl ç»‘å®šï¼š
![](/images/blog/200104_japan_travel/15883270132958.jpg)

æ•ˆæœï¼š
```java
remoteControl.setCommand(0, livingRoomLightOn, livingRoomLightOff);
remoteControl.setCommand(1, kitchenLightOn, kitchenLightOff);
 
remoteControl.onButtonWasPushed(0);
remoteControl.onButtonWasPushed(1);
remoteControl.offButtonWasPushed(1);
```

å‘½ä»¤æ¨¡å¼çš„æ€è€ƒåœ¨äºï¼Œå…è®¸å°†åŠ¨ä½œå°è£…ä¸ºå‘½ä»¤å¯¹è±¡ï¼Œè¿™æ ·ä¸€æ¥å¯ä»¥éšå¿ƒæ‰€æ¬²çš„å­˜å‚¨ã€ä¼ é€’å’Œè°ƒç”¨å®ƒä»¬ã€‚

## ç¬¬ä¸ƒç« ï¼šé€‚é…å™¨æ¨¡å¼ - adapter
Target ç†è§£ä¸ºé¸­å­ï¼Œæ‹¥æœ‰ fly ä¸ quack çš„æ¥å£ã€‚  
Adaptee æ˜¯ç«é¸¡ï¼Œåªæœ‰ fly å’Œ gobble æ¥å£ã€‚   
Adaptor ç»§æ‰¿äº† Target æ¥å£ï¼Œå¹¶æ ¹æ®ç«é¸¡çš„ç‰¹æ•ˆå®ç°äº†å¯¹åº”çš„é¸­å­æ¥å£ã€‚  

æœ€ç»ˆè¾¾åˆ°ä¸ client äº¤äº’æ—¶ï¼Œå¯ä»¥ç›´æ¥æŠŠå®ƒå½“ä½œä¸€åªé¸­å­ã€‚   

![7. Adaptor ](/images/blog/200104_japan_travel/7.%20Adaptor%20.png)

ä¸‰ä¸ªçš„åŒºåˆ«ï¼š
- decorator: å°†ä¸€ä¸ªæ¥å£è½¬æˆå¦å¤–ä¸€ä¸ªæ¥å£
- adaptor: ä¸æ”¹å˜æ¥å£ï¼Œä½†åŠ å…¥è´£ä»»
- facade: è®©æ¥å£æ›´ç®€å•ï¼ˆå¯¹ä¸€ä¸ªå¤æ‚å­ç³»ç»ŸåŒ…è£…ï¼Œåªæš´éœ²ä¸€ä¸ªå¹²å‡€çš„å¤–è§‚ï¼‰

æœ€ç»ˆç›®çš„ï¼šå½“è®¾è®¡ä¸€ä¸ªç³»ç»Ÿæ—¶ï¼Œå°½å¯èƒ½çš„é™ä½å®¢æˆ·ä¸ç³»ç»Ÿä¹‹é—´çš„è€¦åˆ

æ•ˆæœï¼š
``` java
Duck duck = new MallardDuck();

// è®©ä¸ä¼šæ±ªæ±ªå«çš„ turkey ä¹Ÿèƒ½ã€Œé€‚é…ã€å®ç°é¸­å«çš„æ¥å£
WildTurkey turkey = new WildTurkey();
Duck turkeyAdaptor = new TurkeyAdapter(turkey);

System.out.println("The duck says...");
duck.quack();
duck.fly();
System.out.println("The TurkeyAdaptor says...");
turkeyAdaptor.quack();
turkeyAdaptor.fly();
```

## ç¬¬å…«ç« ï¼šæ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ - The Template Method Pattern
æƒ³èµ·äº†å…¬å¸ä¸šåŠ¡ä»£ç ä¸­çš„ ServiceTemplateï¼Œä¸€ä¸ªé“ç†ã€‚   

**âš ï¸æ³¨æ„æŠ½è±¡ç±»ä¸­ brew å’Œ addCondiments æ–¹æ³• æ˜¯ç”¨æ–œä½“æ ‡ç¤ºçš„ï¼Œéœ€è¦è®©å­ç±»å®ç°å¯¹åº”ç»†èŠ‚ã€‚**è€ŒæŠ½è±¡ç±»ç»Ÿä¸€ç®¡ç†ç»Ÿä¸€çš„å¤„ç†æµç¨‹ä¸å­æ­¥éª¤ï¼Œå¹¶æš´éœ²ç»™å®¢æˆ·ä»£ç ï¼ˆå‡å°‘æ•´ä¸ªç³»ç»Ÿçš„ä¾èµ–ï¼‰ã€‚

![8. Template](/images/blog/200104_japan_travel/8.%20Template.png)


## ç¬¬ä¹ç« ï¼šè¿­ä»£ä¸ç»„åˆæ¨¡å¼ - The Iterator and Composite Patterns
è¿­ä»£å™¨æ¨¡å¼ï¼Œé’ˆå¯¹åº•å±‚ä¸åŒçš„ æ•°ç»„ã€åˆ—è¡¨ã€æ•£åˆ—è¡¨ç­‰ï¼Œç»Ÿä¸€ä¸ºè¿­ä»£å™¨çš„å¯¹å¤–æ¥å£ã€‚
![um](/images/blog/200104_japan_travel/uml.png)



## ç¬¬åç« ï¼šçŠ¶æ€æ¨¡å¼ - The State Pattern

çŠ¶æ€æœºã€‚æœ€è¿‘åœ¨åšä¸€ä¸ª telegram ç¾¤ç»„ç®¡ç†çš„æœºå™¨äººï¼Œå¯¹äºç”¨æˆ·çŠ¶æ€çš„ç®¡ç†ï¼Œåˆšå¥½ä¹Ÿå¯ä»¥ç”¨åˆ°è¿™ä¸ªè®¾è®¡æ¨¡å¼ï¼š
       
![](/images/blog/200104_japan_travel/15920333438139.jpg)

æ•ˆæœï¼š
```java
GumballMachine gumballMachine = new GumballMachine(5);
System.out.println(gumballMachine);

gumballMachine.insertQuarter();
gumballMachine.ejectQuarter();
System.out.println(gumballMachine);

gumballMachine.insertQuarter();
gumballMachine.turnCrank();
gumballMachine.insertQuarter();
gumballMachine.turnCrank();
System.out.println(gumballMachine);

// GumballMachine{state=capture10.status_machine.NoQuarterState@6bf256fa, count=5}
// You inserted a quarter!
// Quarter returned
// GumballMachine{state=capture10.status_machine.NoQuarterState@6bf256fa, count=5}
// You inserted a quarter!
// You turned..
// A gumball comes rolling out the slot..
// You inserted a quarter!
// You turned..
// A gumball comes rolling out the slot..
// GumballMachine{state=capture10.status_machine.NoQuarterState@6bf256fa, count=3}
```

## ç¬¬åä¸€ç« ï¼šä»£ç†æ¨¡å¼ - The Proxy Pattern 

æ²¡å¤ªæ‡‚ï¼Œæ‰¾äº†å‡ ä¸ª proxy æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š

- é“¶è¡Œè´¦å·ï¼šé€šè¿‡è¯¥è´¦å·ç®¡ç†æˆ‘ä»¬çš„èµ„é‡‘ã€‚ç›®æ ‡ä¸º controls and manage access to the object they are "protecting".
- db è¿æ¥çš„ clientï¼Œç›¸å…³é…ç½®éœ€è¦æå‰è¢«åˆå§‹åŒ–å¥½ã€‚
- ä½†å‘½ä»¤ä¸€ä¸ªç¨‹åºå‘˜å»å†™ä»£ç çš„æ—¶å€™ï¼Œåœ¨å®Œæˆéœ€æ±‚ crud çš„åŒæ—¶ï¼Œè¿˜è¦è¡¥å……æ–‡æ¡£ï¼

é™æ€ proxyï¼š
![](/images/blog/200104_japan_travel/15920354270766.jpg)

åŠ¨æ€ proxyï¼š
- TODO

## ç¬¬åäºŒç« ï¼šæ¨¡å¼çš„æ¨¡å¼ - Compound Pattern

ç›¸å½“äºå°†ä¸Šé¢è®²è§£è¿‡çš„è®¾è®¡æ¨¡å¼å¤åˆä½¿ç”¨ï¼Œåˆšå¥½è·Ÿç€æ•²ä¸€éä»£ç ï¼Œå¤ä¹ ä¸€ä¸‹ã€‚   

ä½†åƒæ–‡ä¸­è¯´çš„é‚£æ ·ï¼Œæœ‰ç§ç‰›åˆ€æ€é¸¡çš„æ„Ÿè§‰ã€‚ã€‚



